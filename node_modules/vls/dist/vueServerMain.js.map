{"version":3,"file":"vueServerMain.js","sources":["../node_modules/vscode-languageserver-types/lib/esm/main.js","../node_modules/vscode-languageserver/lib/common/utils/is.js","../node_modules/vscode-jsonrpc/lib/common/ral.js","../node_modules/vscode-jsonrpc/lib/common/disposable.js","../node_modules/vscode-jsonrpc/lib/node/ril.js","../node_modules/vscode-jsonrpc/lib/common/is.js","../node_modules/vscode-jsonrpc/lib/common/messages.js","../node_modules/vscode-jsonrpc/lib/common/events.js","../node_modules/vscode-jsonrpc/lib/common/cancellation.js","../node_modules/vscode-jsonrpc/lib/common/messageReader.js","../node_modules/vscode-jsonrpc/lib/common/semaphore.js","../node_modules/vscode-jsonrpc/lib/common/messageWriter.js","../node_modules/vscode-jsonrpc/lib/common/linkedMap.js","../node_modules/vscode-jsonrpc/lib/common/connection.js","../node_modules/vscode-jsonrpc/lib/common/api.js","../node_modules/vscode-jsonrpc/lib/node/main.js","../node_modules/vscode-jsonrpc/node.js","../node_modules/vscode-languageserver-protocol/lib/common/messages.js","../node_modules/vscode-languageserver-protocol/lib/common/utils/is.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolders.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js","../node_modules/vscode-languageserver-protocol/lib/common/protocol.js","../node_modules/vscode-languageserver-protocol/lib/common/connection.js","../node_modules/vscode-languageserver-protocol/lib/common/api.js","../node_modules/vscode-languageserver-protocol/lib/node/main.js","../node_modules/vscode-languageserver/lib/common/utils/uuid.js","../node_modules/vscode-languageserver/lib/common/progress.js","../node_modules/vscode-languageserver/lib/common/configuration.js","../node_modules/vscode-languageserver/lib/common/workspaceFolders.js","../node_modules/vscode-languageserver/lib/common/callHierarchy.js","../node_modules/vscode-languageserver/lib/common/semanticTokens.js","../node_modules/vscode-languageserver/lib/common/server.js","../node_modules/vscode-languageserver/lib/node/files.js","../node_modules/vscode-languageserver-protocol/node.js","../node_modules/vscode-languageserver/lib/common/api.js","../node_modules/vscode-languageserver/lib/node/main.js","../src/vueServerMain.ts"],"sourcesContent":["/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n/**\n * The Position namespace provides helper functions to work with\n * [Position](#Position) literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        return { line: line, character: character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * [Range](#Range) literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * [Location](#Location) literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri: uri, range: range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The LocationLink namespace provides helper functions to work with\n * [LocationLink](#LocationLink) literals.\n */\nexport var LocationLink;\n(function (LocationLink) {\n    /**\n     * Creates a LocationLink literal.\n     * @param targetUri The definition's uri.\n     * @param targetRange The full range of the definition.\n     * @param targetSelectionRange The span of the symbol definition at the target.\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\n     */\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\n    }\n    LocationLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n    }\n    LocationLink.is = is;\n})(LocationLink || (LocationLink = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [Color](#Color) literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red: red,\n            green: green,\n            blue: blue,\n            alpha: alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.number(candidate.red)\n            && Is.number(candidate.green)\n            && Is.number(candidate.blue)\n            && Is.number(candidate.alpha);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * [ColorInformation](#ColorInformation) literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range: range,\n            color: color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [ColorPresentation](#ColorPresentation) literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label: label,\n            textEdit: textEdit,\n            additionalTextEdits: additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * Enum of known range kinds\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * [FoldingRange](#FoldingRange) literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\n        var result = {\n            startLine: startLine,\n            endLine: endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location: location,\n            message: message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The diagnostic tags.\n *\n * @since 3.15.0\n */\nexport var DiagnosticTag;\n(function (DiagnosticTag) {\n    /**\n     * Unused or unnecessary code.\n     *\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\n     * an error squiggle.\n     */\n    DiagnosticTag.Unnecessary = 1;\n    /**\n     * Deprecated or obsolete code.\n     *\n     * Clients are allowed to rendered diagnostics with this tag strike through.\n     */\n    DiagnosticTag.Deprecated = 2;\n})(DiagnosticTag || (DiagnosticTag = {}));\n/**\n * The DiagnosticCode namespace provides functions to deal with complex diagnostic codes.\n *\n * @since 3.16.0 - Proposed state\n */\nexport var DiagnosticCode;\n(function (DiagnosticCode) {\n    /**\n     * Checks whether the given liternal conforms to the [DiagnosticCode](#DiagnosticCode) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && candidate !== null && (Is.number(candidate.value) || Is.string(candidate.value)) && Is.string(candidate.target);\n    }\n    DiagnosticCode.is = is;\n})(DiagnosticCode || (DiagnosticCode = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * [Diagnostic](#Diagnostic) literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        var result = { range: range, message: message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * [Command](#Command) literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var result = { title: title, command: command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range: range, newText: newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates a insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText: newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range: range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument: textDocument, edits: edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var CreateFile;\n(function (CreateFile) {\n    function create(uri, options) {\n        var result = {\n            kind: 'create',\n            uri: uri\n        };\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    CreateFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\n    }\n    CreateFile.is = is;\n})(CreateFile || (CreateFile = {}));\nexport var RenameFile;\n(function (RenameFile) {\n    function create(oldUri, newUri, options) {\n        var result = {\n            kind: 'rename',\n            oldUri: oldUri,\n            newUri: newUri\n        };\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    RenameFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\n    }\n    RenameFile.is = is;\n})(RenameFile || (RenameFile = {}));\nexport var DeleteFile;\n(function (DeleteFile) {\n    function create(uri, options) {\n        var result = {\n            kind: 'delete',\n            uri: uri\n        };\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    DeleteFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\n    }\n    DeleteFile.is = is;\n})(DeleteFile || (DeleteFile = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\n                if (Is.string(change.kind)) {\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                }\n                else {\n                    return TextDocumentEdit.is(change);\n                }\n            }));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nvar TextEditChangeImpl = /** @class */ (function () {\n    function TextEditChangeImpl(edits) {\n        this.edits = edits;\n    }\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\n        this.edits.push(TextEdit.insert(position, newText));\n    };\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\n        this.edits.push(TextEdit.replace(range, newText));\n    };\n    TextEditChangeImpl.prototype.delete = function (range) {\n        this.edits.push(TextEdit.del(range));\n    };\n    TextEditChangeImpl.prototype.add = function (edit) {\n        this.edits.push(edit);\n    };\n    TextEditChangeImpl.prototype.all = function () {\n        return this.edits;\n    };\n    TextEditChangeImpl.prototype.clear = function () {\n        this.edits.splice(0, this.edits.length);\n    };\n    return TextEditChangeImpl;\n}());\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nvar WorkspaceChange = /** @class */ (function () {\n    function WorkspaceChange(workspaceEdit) {\n        var _this = this;\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                workspaceEdit.documentChanges.forEach(function (change) {\n                    if (TextDocumentEdit.is(change)) {\n                        var textEditChange = new TextEditChangeImpl(change.edits);\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\n                    }\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    _this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n    }\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n        /**\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\n         * use to be returned from a workspace edit operation like rename.\n         */\n        get: function () {\n            if (this._workspaceEdit === undefined) {\n                return { documentChanges: [] };\n            }\n            return this._workspaceEdit;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\n        if (VersionedTextDocumentIdentifier.is(key)) {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    documentChanges: []\n                };\n            }\n            if (!this._workspaceEdit.documentChanges) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var textDocument = key;\n            var result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                var edits = [];\n                var textDocumentEdit = {\n                    textDocument: textDocument,\n                    edits: edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    changes: Object.create(null)\n                };\n            }\n            if (!this._workspaceEdit.changes) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            var result = this._textEditChanges[key];\n            if (!result) {\n                var edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    };\n    WorkspaceChange.prototype.createFile = function (uri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\n    };\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\n    };\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\n    };\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n    };\n    return WorkspaceChange;\n}());\nexport { WorkspaceChange };\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri: uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param uri The document's text.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * [TextDocumentItem](#TextDocumentItem) literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri: uri, languageId: languageId, version: version, text: text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n})(MarkupKind || (MarkupKind = {}));\n(function (MarkupKind) {\n    /**\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * Completion item tags are extra annotations that tweak the rendering of a completion\n * item.\n *\n * @since 3.15.0\n */\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    /**\n     * Render a completion as obsolete, usually using a strike-out.\n     */\n    CompletionItemTag.Deprecated = 1;\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n *\n * @since 3.16.0 - Proposed state\n */\nexport var InsertReplaceEdit;\n(function (InsertReplaceEdit) {\n    /**\n     * Creates a new insert / replace edit\n     */\n    function create(newText, insert, replace) {\n        return { newText: newText, insert: insert, replace: replace };\n    }\n    InsertReplaceEdit.create = create;\n    /**\n     * Checks whether the given liternal conforms to the [InsertReplaceEdit](#InsertReplaceEdit) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n    }\n    InsertReplaceEdit.is = is;\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label: label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * [ParameterInformation](#ParameterInformation) literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label: label, documentation: documentation } : { label: label };\n    }\n    ParameterInformation.create = create;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * [SignatureInformation](#SignatureInformation) literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation) {\n        var parameters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            parameters[_i - 2] = arguments[_i];\n        }\n        var result = { label: label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * [DocumentHighlight](#DocumentHighlight) literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     */\n    function create(range, kind) {\n        var result = { range: range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\n/**\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\n * @since 3.16\n */\nexport var SymbolTag;\n(function (SymbolTag) {\n    /**\n     * Render a symbol as obsolete, usually using a strike-out.\n     */\n    SymbolTag.Deprecated = 1;\n})(SymbolTag || (SymbolTag = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol, defaults to the current document.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        var result = {\n            name: name,\n            kind: kind,\n            location: { uri: uri, range: range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\nexport var DocumentSymbol;\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        var result = {\n            name: name,\n            detail: detail,\n            kind: kind,\n            range: range,\n            selectionRange: selectionRange\n        };\n        if (children !== void 0) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === void 0 || Array.isArray(candidate.children)) &&\n            (candidate.tags === void 0 || Array.isArray(candidate.tags));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Empty kind.\n     */\n    CodeActionKind.Empty = '';\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n    /**\n     * Base kind for auto-fix source actions: `source.fixAll`.\n     *\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n     *\n     * @since 3.15.0\n     */\n    CodeActionKind.SourceFixAll = 'source.fixAll';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * [CodeActionContext](#CodeActionContext) literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only) {\n        var result = { diagnostics: diagnostics };\n        if (only !== void 0 && only !== null) {\n            result.only = only;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, commandOrEdit, kind) {\n        var result = { title: title };\n        if (Command.is(commandOrEdit)) {\n            result.command = commandOrEdit;\n        }\n        else {\n            result.edit = commandOrEdit;\n        }\n        if (kind !== void 0) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * [CodeLens](#CodeLens) literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        var result = { range: range };\n        if (Is.defined(data)) {\n            result.data = data;\n        }\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * [FormattingOptions](#FormattingOptions) literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * The DocumentLink namespace provides helper functions to work with\n * [DocumentLink](#DocumentLink) literals.\n */\nexport var DocumentLink;\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range: range, target: target, data: data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\n/**\n * The SelectionRange namespace provides helper function to work with\n * SelectionRange literals.\n */\nexport var SelectionRange;\n(function (SelectionRange) {\n    /**\n     * Creates a new SelectionRange\n     * @param range the range.\n     * @param parent an optional parent.\n     */\n    function create(range, parent) {\n        return { range: range, parent: parent };\n    }\n    SelectionRange.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n    }\n    SelectionRange.is = is;\n})(SelectionRange || (SelectionRange = {}));\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits, function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = text.length;\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\n            var e = sortedEdits[i];\n            var startOffset = document.offsetAt(e.range.start);\n            var endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Overlapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        var p = (data.length / 2) | 0;\n        var left = data.slice(0, p);\n        var right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        var leftIdx = 0;\n        var rightIdx = 0;\n        var i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            var ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = undefined;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            var lineOffsets = [];\n            var text = this._content;\n            var isLineStart = true;\n            for (var i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                var ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FullTextDocument;\n}());\nvar Is;\n(function (Is) {\n    var toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n//# sourceMappingURL=ral.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\n//# sourceMappingURL=disposable.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"../common/ral\");\nconst disposable_1 = require(\"../common/disposable\");\nconst util_1 = require(\"util\");\nconst DefaultSize = 8192;\nconst CR = Buffer.from('\\r', 'ascii')[0];\nconst LF = Buffer.from('\\n', 'ascii')[0];\nconst CRLF = '\\r\\n';\nclass MessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this.index = 0;\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        let toAppend;\n        if (typeof chunk === 'string') {\n            toAppend = Buffer.from(chunk, this._encoding);\n        }\n        else {\n            toAppend = chunk;\n        }\n        if (this.buffer.length - this.index >= toAppend.length) {\n            this.buffer.set(toAppend, this.index);\n        }\n        else {\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\n            if (this.index === 0) {\n                this.buffer = Buffer.allocUnsafe(newSize);\n                this.buffer.set(toAppend);\n            }\n            else {\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\n            }\n        }\n        this.index += toAppend.length;\n    }\n    tryReadHeaders() {\n        let current = 0;\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\n            current++;\n        }\n        // No header / body separator found (e.g CRLFCRLF)\n        if (current + 3 >= this.index) {\n            return undefined;\n        }\n        const result = new Map();\n        const headers = this.buffer.toString('ascii', 0, current).split(CRLF);\n        headers.forEach((header) => {\n            let index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error('Message header must separate key and value using :');\n            }\n            let key = header.substr(0, index);\n            let value = header.substr(index + 1).trim();\n            result.set(key, value);\n        });\n        let nextStart = current + 4;\n        this.buffer = this.buffer.slice(nextStart);\n        this.index = this.index - nextStart;\n        return result;\n    }\n    tryReadBody(length) {\n        if (this.index < length) {\n            return undefined;\n        }\n        const result = Buffer.alloc(length);\n        this.buffer.copy(result, 0, 0, length);\n        const nextStart = length;\n        this.buffer.copy(this.buffer, 0, nextStart);\n        this.index = this.index - nextStart;\n        return result;\n    }\n    get numberOfBytes() {\n        return this.index;\n    }\n}\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                try {\n                    return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                try {\n                    if (buffer instanceof Buffer) {\n                        return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                    }\n                    else {\n                        return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            return setTimeout(callback, ms, ...args);\n        },\n        clearTimeout(handle) {\n            clearTimeout(handle);\n        },\n        setImmediate(callback, ...args) {\n            return setImmediate(callback, ...args);\n        },\n        clearImmediate(handle) {\n            clearImmediate(handle);\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        ral_1.default.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n//# sourceMappingURL=ril.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    ErrorCodes.serverErrorStart = -32099;\n    ErrorCodes.serverErrorEnd = -32000;\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    // Defined by the protocol.\n    ErrorCodes.RequestCancelled = -32800;\n    ErrorCodes.ContentModified = -32801;\n    // Defined by VSCode library.\n    ErrorCodes.MessageWriteError = 1;\n    ErrorCodes.MessageReadError = 2;\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        return {\n            code: this.code,\n            message: this.message,\n            data: this.data,\n        };\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(_method, _numberOfParams) {\n        this._method = _method;\n        this._numberOfParams = _numberOfParams;\n    }\n    get method() {\n        return this._method;\n    }\n    get numberOfParams() {\n        return this._numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n *\n * The type parameter RO will be removed in the next major version\n * of the JSON RPC library since it is a LSP concept and doesn't\n * belong here. For now it is tagged as default never.\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\n/**\n * The type parameter RO will be removed in the next major version\n * of the JSON RPC library since it is a LSP concept and doesn't\n * belong here. For now it is tagged as default never.\n */\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n        this._ = undefined;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\n/**\n * Tests if the given message is a request message\n */\nfunction isRequestMessage(message) {\n    const candidate = message;\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n}\nexports.isRequestMessage = isRequestMessage;\n/**\n * Tests if the given message is a notification message\n */\nfunction isNotificationMessage(message) {\n    const candidate = message;\n    return candidate && is.string(candidate.method) && message.id === void 0;\n}\nexports.isNotificationMessage = isNotificationMessage;\n/**\n * Tests if the given message is a response message\n */\nfunction isResponseMessage(message) {\n    const candidate = message;\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n}\nexports.isResponseMessage = isResponseMessage;\n//# sourceMappingURL=messages.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event = exports.Event || (exports.Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                ral_1.default().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n//# sourceMappingURL=events.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = ral_1.default().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { ral_1.default().timer.clearTimeout(handle); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n//# sourceMappingURL=cancellation.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        var _a;\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options !== null && options !== void 0 ? options : 'utf-8';\n        }\n        else {\n            charset = (_a = options.charset) !== null && _a !== void 0 ? _a : 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = ral_1.default().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = ral_1.default().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        this.buffer.append(data);\n        while (true) {\n            if (this.nextMessageLength === -1) {\n                const headers = this.buffer.tryReadHeaders();\n                if (!headers) {\n                    return;\n                }\n                const contentLength = headers.get('Content-Length');\n                if (!contentLength) {\n                    throw new Error('Header must provide a Content-Length property.');\n                }\n                const length = parseInt(contentLength);\n                if (isNaN(length)) {\n                    throw new Error('Content-Length value must be a number.');\n                }\n                this.nextMessageLength = length;\n            }\n            const body = this.buffer.tryReadBody(this.nextMessageLength);\n            if (body === undefined) {\n                /** We haven't received the full message yet. */\n                this.setPartialMessageTimer();\n                return;\n            }\n            this.clearPartialMessageTimer();\n            this.nextMessageLength = -1;\n            let p;\n            if (this.options.contentDecoder !== undefined) {\n                p = this.options.contentDecoder.decode(body);\n            }\n            else {\n                p = Promise.resolve(body);\n            }\n            p.then((value) => {\n                this.options.contentTypeDecoder.decode(value, this.options).then((msg) => {\n                    this.callback(msg);\n                }, (error) => {\n                    this.fireError(error);\n                });\n            }, (error) => {\n                this.fireError(error);\n            });\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            ral_1.default().timer.clearTimeout(this.partialMessageTimer);\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = ral_1.default().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n//# sourceMappingURL=messageReader.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        ral_1.default().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n//# sourceMappingURL=semaphore.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        var _a, _b;\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options !== null && options !== void 0 ? options : 'utf-8', contentTypeEncoder: ral_1.default().applicationJson.encoder };\n        }\n        else {\n            return { charset: (_a = options.charset) !== null && _a !== void 0 ? _a : 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: (_b = options.contentTypeEncoder) !== null && _b !== void 0 ? _b : ral_1.default().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n//# sourceMappingURL=messageWriter.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch = exports.Touch || (exports.Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[Symbol.toStringTag] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        var _a;\n        return (_a = this._head) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    get last() {\n        var _a;\n        return (_a = this._tail) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happend if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happend if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n//# sourceMappingURL=linkedMap.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\n})(Trace = exports.Trace || (exports.Trace = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.createCancellationTokenSource);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy = exports.CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy = exports.CancellationSenderStrategy || (exports.CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy = exports.CancellationStrategy || (exports.CancellationStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions = exports.ConnectionOptions || (exports.ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSquenceNumber = 0;\n    let unknownResponseSquenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = Object.create(null);\n    let starNotificationHandler = undefined;\n    const notificationHandlers = Object.create(null);\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = Object.create(null);\n    let requestTokens = Object.create(null);\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSquenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.isRequestMessage(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.isResponseMessage(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = ral_1.default().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            if (messages_1.isRequestMessage(message)) {\n                handleRequest(message);\n            }\n            else if (messages_1.isNotificationMessage(message)) {\n                handleNotification(message);\n            }\n            else if (messages_1.isResponseMessage(message)) {\n                handleResponse(message);\n            }\n            else {\n                handleInvalidMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\n                const key = createRequestQueueKey(message.params.id);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.isRequestMessage(toCancel)) {\n                    const strategy = options === null || options === void 0 ? void 0 : options.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response);\n                        return;\n                    }\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers[requestMessage.method];\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = String(requestMessage.id);\n            const cancellationSource = cancellationStrategy.receiver.createCancellationTokenSource(tokenKey);\n            requestTokens[tokenKey] = cancellationSource;\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but recevied none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    delete requestTokens[tokenKey];\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        delete requestTokens[tokenKey];\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        delete requestTokens[tokenKey];\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    delete requestTokens[tokenKey];\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                delete requestTokens[tokenKey];\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = String(responseMessage.id);\n            const responsePromise = responsePromises[key];\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise) {\n                delete responsePromises[key];\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            notificationHandler = (params) => {\n                const id = params.id;\n                const source = requestTokens[String(id)];\n                if (source) {\n                    source.cancel();\n                }\n            };\n        }\n        else {\n            const element = notificationHandlers[message.method];\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but recevied none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        if (type !== undefined) {\n                            if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                            }\n                            if (type.numberOfParams !== message.params.length) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${message.params.length} argumennts`);\n                            }\n                        }\n                        notificationHandler(...message.params);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = String(responseMessage.id);\n            const responseHandler = responsePromises[key];\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose && message.params) {\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.params) {\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose && message.params) {\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.params) {\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n                break;\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Recevied parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Recevied ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            messageWriter.write(notificationMessage);\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    notificationHandlers[type] = { type: undefined, handler };\n                }\n                else {\n                    notificationHandlers[type.method] = { type, handler };\n                }\n            }\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Recevied ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    cancellationStrategy.sender.sendCancellation(connection, id);\n                });\n            }\n            const result = new Promise((resolve, reject) => {\n                const requestMessage = {\n                    jsonrpc: version,\n                    id: id,\n                    method: method,\n                    params: messageParams\n                };\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable === null || disposable === void 0 ? void 0 : disposable.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable === null || disposable === void 0 ? void 0 : disposable.dispose();\n                };\n                let responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                traceSendingRequest(requestMessage);\n                try {\n                    messageWriter.write(requestMessage);\n                }\n                catch (e) {\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\n                    responsePromise = null;\n                }\n                if (responsePromise) {\n                    responsePromises[String(id)] = responsePromise;\n                }\n            });\n            return result;\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            if (StarRequestHandler.is(type)) {\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                if (handler !== undefined) {\n                    requestHandlers[type] = { handler: handler, type: undefined };\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    requestHandlers[type.method] = { type, handler };\n                }\n            }\n        },\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new Error('Connection got disposed.');\n            Object.keys(responsePromises).forEach((key) => {\n                responsePromises[key].reject(error);\n            });\n            responsePromises = Object.create(null);\n            requestTokens = Object.create(null);\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            ral_1.default().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"../common/messages\");\nexports.RequestType = messages_1.RequestType;\nexports.RequestType0 = messages_1.RequestType0;\nexports.RequestType1 = messages_1.RequestType1;\nexports.RequestType2 = messages_1.RequestType2;\nexports.RequestType3 = messages_1.RequestType3;\nexports.RequestType4 = messages_1.RequestType4;\nexports.RequestType5 = messages_1.RequestType5;\nexports.RequestType6 = messages_1.RequestType6;\nexports.RequestType7 = messages_1.RequestType7;\nexports.RequestType8 = messages_1.RequestType8;\nexports.RequestType9 = messages_1.RequestType9;\nexports.ResponseError = messages_1.ResponseError;\nexports.ErrorCodes = messages_1.ErrorCodes;\nexports.NotificationType = messages_1.NotificationType;\nexports.NotificationType0 = messages_1.NotificationType0;\nexports.NotificationType1 = messages_1.NotificationType1;\nexports.NotificationType2 = messages_1.NotificationType2;\nexports.NotificationType3 = messages_1.NotificationType3;\nexports.NotificationType4 = messages_1.NotificationType4;\nexports.NotificationType5 = messages_1.NotificationType5;\nexports.NotificationType6 = messages_1.NotificationType6;\nexports.NotificationType7 = messages_1.NotificationType7;\nexports.NotificationType8 = messages_1.NotificationType8;\nexports.NotificationType9 = messages_1.NotificationType9;\nexports.ParameterStructures = messages_1.ParameterStructures;\nconst disposable_1 = require(\"../common/disposable\");\nexports.Disposable = disposable_1.Disposable;\nconst events_1 = require(\"../common/events\");\nexports.Event = events_1.Event;\nexports.Emitter = events_1.Emitter;\nconst cancellation_1 = require(\"../common/cancellation\");\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\nexports.CancellationToken = cancellation_1.CancellationToken;\nconst messageReader_1 = require(\"../common/messageReader\");\nexports.MessageReader = messageReader_1.MessageReader;\nexports.AbstractMessageReader = messageReader_1.AbstractMessageReader;\nexports.ReadableStreamMessageReader = messageReader_1.ReadableStreamMessageReader;\nconst messageWriter_1 = require(\"../common/messageWriter\");\nexports.MessageWriter = messageWriter_1.MessageWriter;\nexports.AbstractMessageWriter = messageWriter_1.AbstractMessageWriter;\nexports.WriteableStreamMessageWriter = messageWriter_1.WriteableStreamMessageWriter;\nconst connection_1 = require(\"../common/connection\");\nexports.ConnectionStrategy = connection_1.ConnectionStrategy;\nexports.ConnectionOptions = connection_1.ConnectionOptions;\nexports.NullLogger = connection_1.NullLogger;\nexports.createMessageConnection = connection_1.createMessageConnection;\nexports.ProgressType = connection_1.ProgressType;\nexports.Trace = connection_1.Trace;\nexports.TraceFormat = connection_1.TraceFormat;\nexports.SetTraceNotification = connection_1.SetTraceNotification;\nexports.LogTraceNotification = connection_1.LogTraceNotification;\nexports.ConnectionErrors = connection_1.ConnectionErrors;\nexports.ConnectionError = connection_1.ConnectionError;\nexports.CancellationReceiverStrategy = connection_1.CancellationReceiverStrategy;\nexports.CancellationSenderStrategy = connection_1.CancellationSenderStrategy;\nexports.CancellationStrategy = connection_1.CancellationStrategy;\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n//# sourceMappingURL=api.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\n__export(require(\"../common/api\"));\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super(ril_1.default().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super(ril_1.default().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readble, encoding) {\n        super(ril_1.default().stream.asReadableStream(readble), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super(ril_1.default().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nfunction generateRandomPipeName() {\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    else {\n        // Mac/Unix: use socket file\n        return path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = net_1.createServer((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = net_1.createConnection(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = net_1.createServer((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = net_1.createConnection(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isMessageReader(value) {\n    return value.listen !== undefined && value.read === undefined;\n}\nfunction isMessageWriter(value) {\n    return value.write !== undefined && value.end === undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isMessageReader(input) ? input : new StreamMessageReader(input);\n    const writer = isMessageWriter(output) ? output : new StreamMessageWriter(output);\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return api_1.createMessageConnection(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n//# sourceMappingURL=main.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\n//# sourceMappingURL=messages.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n    /** @deprecated Use ImplementationRequest.type */\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\n//# sourceMappingURL=protocol.implementation.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n    /** @deprecated Use TypeDefinitionRequest.type */\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\n//# sourceMappingURL=protocol.typeDefinition.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\n//# sourceMappingURL=protocol.workspaceFolders.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\n//# sourceMappingURL=protocol.configuration.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n    /** @deprecated Use DocumentColorRequest.type */\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\n//# sourceMappingURL=protocol.colorProvider.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * Enum of known range kinds\n */\nvar FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n    /** @deprecated Use FoldingRangeRequest.type */\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\n//# sourceMappingURL=protocol.foldingRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\n * to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n    /** @deprecated Use DeclarationRequest.type */\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\n//# sourceMappingURL=protocol.declaration.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n    /** @deprecated  Use SelectionRangeRequest.type */\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\n//# sourceMappingURL=protocol.selectionRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\n//# sourceMappingURL=protocol.progress.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to a incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\n//# sourceMappingURL=protocol.callHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * A set of predefined token types. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokenTypes;\n(function (SemanticTokenTypes) {\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\n    SemanticTokenTypes[\"type\"] = \"type\";\n    SemanticTokenTypes[\"class\"] = \"class\";\n    SemanticTokenTypes[\"enum\"] = \"enum\";\n    SemanticTokenTypes[\"interface\"] = \"interface\";\n    SemanticTokenTypes[\"struct\"] = \"struct\";\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\n    SemanticTokenTypes[\"variable\"] = \"variable\";\n    SemanticTokenTypes[\"property\"] = \"property\";\n    SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n    SemanticTokenTypes[\"event\"] = \"event\";\n    SemanticTokenTypes[\"function\"] = \"function\";\n    SemanticTokenTypes[\"member\"] = \"member\";\n    SemanticTokenTypes[\"macro\"] = \"macro\";\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\n    SemanticTokenTypes[\"modifier\"] = \"modifier\";\n    SemanticTokenTypes[\"comment\"] = \"comment\";\n    SemanticTokenTypes[\"string\"] = \"string\";\n    SemanticTokenTypes[\"number\"] = \"number\";\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\n    SemanticTokenTypes[\"operator\"] = \"operator\";\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\n/**\n * A set of predefined token modifiers. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokenModifiers;\n(function (SemanticTokenModifiers) {\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n    SemanticTokenModifiers[\"static\"] = \"static\";\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n    SemanticTokenModifiers[\"async\"] = \"async\";\n    SemanticTokenModifiers[\"modification\"] = \"modification\";\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n    SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokens;\n(function (SemanticTokens) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n    }\n    SemanticTokens.is = is;\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat = exports.TokenFormat || (exports.TokenFormat = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n})(SemanticTokensDeltaRequest = exports.SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\n//------- 'textDocument/semanticTokens/refresh' -----\nvar SemanticTokensRefreshNotification;\n(function (SemanticTokensRefreshNotification) {\n    SemanticTokensRefreshNotification.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshNotification.type = new messages_1.ProtocolNotificationType0(SemanticTokensRefreshNotification.method);\n})(SemanticTokensRefreshNotification = exports.SemanticTokensRefreshNotification || (exports.SemanticTokensRefreshNotification = {}));\n//# sourceMappingURL=protocol.semanticTokens.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Is = require(\"./utils/is\");\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\nconst protocol_progress_1 = require(\"./protocol.progress\");\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nexports.CallHierarchyIncomingCallsRequest = protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest;\nexports.CallHierarchyOutgoingCallsRequest = protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest;\nexports.CallHierarchyPrepareRequest = protocol_callHierarchy_1.CallHierarchyPrepareRequest;\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nexports.SemanticTokenTypes = protocol_semanticTokens_1.SemanticTokenTypes;\nexports.SemanticTokenModifiers = protocol_semanticTokens_1.SemanticTokenModifiers;\nexports.SemanticTokens = protocol_semanticTokens_1.SemanticTokens;\nexports.TokenFormat = protocol_semanticTokens_1.TokenFormat;\nexports.SemanticTokensRequest = protocol_semanticTokens_1.SemanticTokensRequest;\nexports.SemanticTokensDeltaRequest = protocol_semanticTokens_1.SemanticTokensDeltaRequest;\nexports.SemanticTokensRangeRequest = protocol_semanticTokens_1.SemanticTokensRangeRequest;\nexports.SemanticTokensRefreshNotification = protocol_semanticTokens_1.SemanticTokensRefreshNotification;\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * The DocumentFilter namespace provides helper functions to work with\n * [DocumentFilter](#DocumentFilter) literals.\n */\nvar DocumentFilter;\n(function (DocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\n    }\n    DocumentFilter.is = is;\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * [DocumentSelector](#DocumentSelector)s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling startegy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type [InitializeParams](#InitializeParams)\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeError`;\n */\nvar InitializeError;\n(function (InitializeError) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeError.unknownProtocolVersion = 1;\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\n/**\n * The intialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n    /** @deprecated Use CompletionRequest.type */\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type [CompletionItem](#CompletionItem) the response\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\n * type [Hover](#Hover) or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\n * to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n    /** @deprecated Use DefinitionRequest.type */\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type [ReferenceParams](#ReferenceParams) the response is of type\n * [Location[]](#Location) or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n    /** @deprecated Use ReferencesRequest.type */\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\n/**\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\n * text document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\n * (#DocumentHighlight) or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n    /** @deprecated Use DocumentHighlightRequest.type */\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n    /** @deprecated Use DocumentSymbolRequest.type */\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n    /** @deprecated Use CodeActionRequest.type */\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\n * resolves to such.\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n    /** @deprecated Use WorkspaceSymbolRequest.type */\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\n    /** @deprecated Use CodeLensRequest.type */\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n    /** @deprecated Use DocumentLinkRequest.type */\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type [DocumentLink](#DocumentLink) the response\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\n/**\n * A request to to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\n/**\n * A request to to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\n//# sourceMappingURL=protocol.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return vscode_jsonrpc_1.createMessageConnection(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"vscode-jsonrpc\"));\n__export(require(\"vscode-languageserver-types\"));\n__export(require(\"./messages\"));\n__export(require(\"./protocol\"));\nvar connection_1 = require(\"./connection\");\nexports.createProtocolConnection = connection_1.createProtocolConnection;\n//# sourceMappingURL=api.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst node_1 = require(\"vscode-jsonrpc/node\");\n__export(require(\"vscode-jsonrpc/node\"));\n__export(require(\"../common/api\"));\nfunction createProtocolConnection(input, output, logger, options) {\n    return node_1.createMessageConnection(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n//# sourceMappingURL=main.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n//# sourceMappingURL=uuid.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst uuid_1 = require(\"./utils/uuid\");\nclass WorkDoneProgressReporterImpl {\n    constructor(_connection, _token) {\n        this._connection = _connection;\n        this._token = _token;\n        WorkDoneProgressReporterImpl.Instances.set(this._token, this);\n    }\n    begin(title, percentage, message, cancellable) {\n        let param = {\n            kind: 'begin',\n            title,\n            percentage,\n            message,\n            cancellable\n        };\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, param);\n    }\n    report(arg0, arg1) {\n        let param = {\n            kind: 'report'\n        };\n        if (typeof arg0 === 'number') {\n            param.percentage = arg0;\n            if (arg1 !== undefined) {\n                param.message = arg1;\n            }\n        }\n        else {\n            param.message = arg0;\n        }\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, param);\n    }\n    done() {\n        WorkDoneProgressReporterImpl.Instances.delete(this._token);\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, { kind: 'end' });\n    }\n}\nWorkDoneProgressReporterImpl.Instances = new Map();\nclass WorkDoneProgressServerReporterImpl extends WorkDoneProgressReporterImpl {\n    constructor(connection, token) {\n        super(connection, token);\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\n    }\n    get token() {\n        return this._source.token;\n    }\n    done() {\n        this._source.dispose();\n        super.done();\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nclass NullProgressReporter {\n    constructor() {\n    }\n    begin() {\n    }\n    report() {\n    }\n    done() {\n    }\n}\nclass NullProgressServerReporter extends NullProgressReporter {\n    constructor() {\n        super();\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\n    }\n    get token() {\n        return this._source.token;\n    }\n    done() {\n        this._source.dispose();\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nfunction attachWorkDone(connection, params) {\n    if (params === undefined || params.workDoneToken === undefined) {\n        return new NullProgressReporter();\n    }\n    const token = params.workDoneToken;\n    delete params.workDoneToken;\n    return new WorkDoneProgressReporterImpl(connection, token);\n}\nexports.attachWorkDone = attachWorkDone;\nexports.ProgressFeature = (Base) => {\n    return class extends Base {\n        constructor() {\n            super();\n            this._progressSupported = false;\n        }\n        initialize(capabilities) {\n            var _a;\n            if (((_a = capabilities === null || capabilities === void 0 ? void 0 : capabilities.window) === null || _a === void 0 ? void 0 : _a.workDoneProgress) === true) {\n                this._progressSupported = true;\n                this.connection.onNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, (params) => {\n                    let progress = WorkDoneProgressReporterImpl.Instances.get(params.token);\n                    if (progress instanceof WorkDoneProgressServerReporterImpl || progress instanceof NullProgressServerReporter) {\n                        progress.cancel();\n                    }\n                });\n            }\n        }\n        attachWorkDoneProgress(token) {\n            if (token === undefined) {\n                return new NullProgressReporter();\n            }\n            else {\n                return new WorkDoneProgressReporterImpl(this.connection, token);\n            }\n        }\n        createWorkDoneProgress() {\n            if (this._progressSupported) {\n                const token = uuid_1.generateUuid();\n                return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, { token }).then(() => {\n                    const result = new WorkDoneProgressServerReporterImpl(this.connection, token);\n                    return result;\n                });\n            }\n            else {\n                return Promise.resolve(new NullProgressServerReporter());\n            }\n        }\n    };\n};\nvar ResultProgress;\n(function (ResultProgress) {\n    ResultProgress.type = new vscode_languageserver_protocol_1.ProgressType();\n})(ResultProgress || (ResultProgress = {}));\nclass ResultProgressReporterImpl {\n    constructor(_connection, _token) {\n        this._connection = _connection;\n        this._token = _token;\n    }\n    report(data) {\n        this._connection.sendProgress(ResultProgress.type, this._token, data);\n    }\n}\nfunction attachPartialResult(connection, params) {\n    if (params === undefined || params.partialResultToken === undefined) {\n        return undefined;\n    }\n    const token = params.partialResultToken;\n    delete params.partialResultToken;\n    return new ResultProgressReporterImpl(connection, token);\n}\nexports.attachPartialResult = attachPartialResult;\n//# sourceMappingURL=progress.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nexports.ConfigurationFeature = (Base) => {\n    return class extends Base {\n        getConfiguration(arg) {\n            if (!arg) {\n                return this._getConfiguration({});\n            }\n            else if (Is.string(arg)) {\n                return this._getConfiguration({ section: arg });\n            }\n            else {\n                return this._getConfiguration(arg);\n            }\n        }\n        _getConfiguration(arg) {\n            let params = {\n                items: Array.isArray(arg) ? arg : [arg]\n            };\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, params).then((result) => {\n                return Array.isArray(arg) ? result : result[0];\n            });\n        }\n    };\n};\n//# sourceMappingURL=configuration.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nexports.WorkspaceFoldersFeature = (Base) => {\n    return class extends Base {\n        initialize(capabilities) {\n            let workspaceCapabilities = capabilities.workspace;\n            if (workspaceCapabilities && workspaceCapabilities.workspaceFolders) {\n                this._onDidChangeWorkspaceFolders = new vscode_languageserver_protocol_1.Emitter();\n                this.connection.onNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, (params) => {\n                    this._onDidChangeWorkspaceFolders.fire(params.event);\n                });\n            }\n        }\n        getWorkspaceFolders() {\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type);\n        }\n        get onDidChangeWorkspaceFolders() {\n            if (!this._onDidChangeWorkspaceFolders) {\n                throw new Error('Client doesn\\'t support sending workspace folder change events.');\n            }\n            if (!this._unregistration) {\n                this._unregistration = this.connection.client.register(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type);\n            }\n            return this._onDidChangeWorkspaceFolders.event;\n        }\n    };\n};\n//# sourceMappingURL=workspaceFolders.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nexports.CallHierarchyFeature = (Base) => {\n    return class extends Base {\n        get callHierarchy() {\n            return {\n                onPrepare: (handler) => {\n                    this.connection.onRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), undefined);\n                    });\n                },\n                onIncomingCalls: (handler) => {\n                    const type = vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onOutgoingCalls: (handler) => {\n                    const type = vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\n//# sourceMappingURL=callHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nexports.SemanticTokensFeature = (Base) => {\n    return class extends Base {\n        get semanticTokens() {\n            return {\n                on: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onDelta: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onRange: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\nclass SemanticTokensBuilder {\n    constructor() {\n        this._prevData = undefined;\n        this.initialize();\n    }\n    initialize() {\n        this._id = Date.now();\n        this._prevLine = 0;\n        this._prevChar = 0;\n        this._data = [];\n        this._dataLen = 0;\n    }\n    push(line, char, length, tokenType, tokenModifiers) {\n        let pushLine = line;\n        let pushChar = char;\n        if (this._dataLen > 0) {\n            pushLine -= this._prevLine;\n            if (pushLine === 0) {\n                pushChar -= this._prevChar;\n            }\n        }\n        this._data[this._dataLen++] = pushLine;\n        this._data[this._dataLen++] = pushChar;\n        this._data[this._dataLen++] = length;\n        this._data[this._dataLen++] = tokenType;\n        this._data[this._dataLen++] = tokenModifiers;\n        this._prevLine = line;\n        this._prevChar = char;\n    }\n    get id() {\n        return this._id.toString();\n    }\n    previousResult(id) {\n        if (this.id === id) {\n            this._prevData = this._data;\n        }\n        this.initialize();\n    }\n    build() {\n        this._prevData = undefined;\n        return {\n            resultId: this.id,\n            data: this._data\n        };\n    }\n    canBuildEdits() {\n        return this._prevData !== undefined;\n    }\n    buildEdits() {\n        if (this._prevData !== undefined) {\n            const prevDataLength = this._prevData.length;\n            const dataLength = this._data.length;\n            let startIndex = 0;\n            while (startIndex < dataLength && startIndex < prevDataLength && this._prevData[startIndex] === this._data[startIndex]) {\n                startIndex++;\n            }\n            if (startIndex < dataLength && startIndex < prevDataLength) {\n                // Find end index\n                let endIndex = 0;\n                while (endIndex < dataLength && endIndex < prevDataLength && this._prevData[prevDataLength - 1 - endIndex] === this._data[dataLength - 1 - endIndex]) {\n                    endIndex++;\n                }\n                const newData = this._data.slice(startIndex, dataLength - endIndex);\n                const result = {\n                    resultId: this.id,\n                    edits: [\n                        { start: startIndex, deleteCount: prevDataLength - endIndex - startIndex, data: newData }\n                    ]\n                };\n                return result;\n            }\n            else if (startIndex < dataLength) {\n                return { resultId: this.id, edits: [\n                        { start: startIndex, deleteCount: 0, data: this._data.slice(startIndex) }\n                    ] };\n            }\n            else if (startIndex < prevDataLength) {\n                return { resultId: this.id, edits: [\n                        { start: startIndex, deleteCount: prevDataLength - startIndex }\n                    ] };\n            }\n            else {\n                return { resultId: this.id, edits: [] };\n            }\n        }\n        else {\n            return this.build();\n        }\n    }\n}\nexports.SemanticTokensBuilder = SemanticTokensBuilder;\n//# sourceMappingURL=semanticTokens.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst UUID = require(\"./utils/uuid\");\nconst progress_1 = require(\"./progress\");\nconst configuration_1 = require(\"./configuration\");\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nconst semanticTokens_1 = require(\"./semanticTokens\");\nfunction null2Undefined(value) {\n    if (value === null) {\n        return undefined;\n    }\n    return value;\n}\n/**\n * A manager for simple text documents\n */\nclass TextDocuments {\n    /**\n     * Create a new text document manager.\n     */\n    constructor(configuration) {\n        this._documents = Object.create(null);\n        this._configuration = configuration;\n        this._onDidChangeContent = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidOpen = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidClose = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidSave = new vscode_languageserver_protocol_1.Emitter();\n        this._onWillSave = new vscode_languageserver_protocol_1.Emitter();\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been opened or the content changes.\n     */\n    get onDidChangeContent() {\n        return this._onDidChangeContent.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been opened.\n     */\n    get onDidOpen() {\n        return this._onDidOpen.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * will be saved.\n     */\n    get onWillSave() {\n        return this._onWillSave.event;\n    }\n    /**\n     * Sets a handler that will be called if a participant wants to provide\n     * edits during a text document save.\n     */\n    onWillSaveWaitUntil(handler) {\n        this._willSaveWaitUntil = handler;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been saved.\n     */\n    get onDidSave() {\n        return this._onDidSave.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been closed.\n     */\n    get onDidClose() {\n        return this._onDidClose.event;\n    }\n    /**\n     * Returns the document for the given URI. Returns undefined if\n     * the document is not mananged by this instance.\n     *\n     * @param uri The text document's URI to retrieve.\n     * @return the text document or `undefined`.\n     */\n    get(uri) {\n        return this._documents[uri];\n    }\n    /**\n     * Returns all text documents managed by this instance.\n     *\n     * @return all text documents.\n     */\n    all() {\n        return Object.keys(this._documents).map(key => this._documents[key]);\n    }\n    /**\n     * Returns the URIs of all text documents managed by this instance.\n     *\n     * @return the URI's of all text documents.\n     */\n    keys() {\n        return Object.keys(this._documents);\n    }\n    /**\n     * Listens for `low level` notification on the given connection to\n     * update the text documents managed by this instance.\n     *\n     * Please note that the connection only provides handlers not an event model. Therefore\n     * listening on a connection will overwrite the following handlers on a connection:\n     * `onDidOpenTextDocument`, `onDidChangeTextDocument`, `onDidCloseTextDocument`,\n     * `onWillSaveTextDocument`, `onWillSaveTextDocumentWaitUntil` and `onDidSaveTextDocument`.\n     *\n     * Use the correspnding events on the TextDocuments instance instead.\n     *\n     * @param connection The connection to listen on.\n     */\n    listen(connection) {\n        connection.__textDocumentSync = vscode_languageserver_protocol_1.TextDocumentSyncKind.Full;\n        connection.onDidOpenTextDocument((event) => {\n            let td = event.textDocument;\n            let document = this._configuration.create(td.uri, td.languageId, td.version, td.text);\n            this._documents[td.uri] = document;\n            let toFire = Object.freeze({ document });\n            this._onDidOpen.fire(toFire);\n            this._onDidChangeContent.fire(toFire);\n        });\n        connection.onDidChangeTextDocument((event) => {\n            let td = event.textDocument;\n            let changes = event.contentChanges;\n            if (changes.length === 0) {\n                return;\n            }\n            let document = this._documents[td.uri];\n            const { version } = td;\n            if (version === null || version === undefined) {\n                throw new Error(`Received document change event for ${td.uri} without valid version identifier`);\n            }\n            document = this._configuration.update(document, changes, version);\n            this._documents[td.uri] = document;\n            this._onDidChangeContent.fire(Object.freeze({ document }));\n        });\n        connection.onDidCloseTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                delete this._documents[event.textDocument.uri];\n                this._onDidClose.fire(Object.freeze({ document }));\n            }\n        });\n        connection.onWillSaveTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                this._onWillSave.fire(Object.freeze({ document, reason: event.reason }));\n            }\n        });\n        connection.onWillSaveTextDocumentWaitUntil((event, token) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document && this._willSaveWaitUntil) {\n                return this._willSaveWaitUntil(Object.freeze({ document, reason: event.reason }), token);\n            }\n            else {\n                return [];\n            }\n        });\n        connection.onDidSaveTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                this._onDidSave.fire(Object.freeze({ document }));\n            }\n        });\n    }\n}\nexports.TextDocuments = TextDocuments;\n/**\n * Helps tracking error message. Equal occurences of the same\n * message are only stored once. This class is for example\n * useful if text documents are validated in a loop and equal\n * error message should be folded into one.\n */\nclass ErrorMessageTracker {\n    constructor() {\n        this._messages = Object.create(null);\n    }\n    /**\n     * Add a message to the tracker.\n     *\n     * @param message The message to add.\n     */\n    add(message) {\n        let count = this._messages[message];\n        if (!count) {\n            count = 0;\n        }\n        count++;\n        this._messages[message] = count;\n    }\n    /**\n     * Send all tracked messages to the connection's window.\n     *\n     * @param connection The connection established between client and server.\n     */\n    sendErrors(connection) {\n        Object.keys(this._messages).forEach(message => {\n            connection.window.showErrorMessage(message);\n        });\n    }\n}\nexports.ErrorMessageTracker = ErrorMessageTracker;\nclass RemoteConsoleImpl {\n    constructor() {\n    }\n    rawAttach(connection) {\n        this._rawConnection = connection;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    initialize(_capabilities) {\n    }\n    error(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Error, message);\n    }\n    warn(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Warning, message);\n    }\n    info(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Info, message);\n    }\n    log(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Log, message);\n    }\n    send(type, message) {\n        if (this._rawConnection) {\n            this._rawConnection.sendNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, { type, message });\n        }\n    }\n}\nclass _RemoteWindowImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    showErrorMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Error, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n    showWarningMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Warning, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n    showInformationMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Info, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n}\nconst RemoteWindowImpl = progress_1.ProgressFeature(_RemoteWindowImpl);\nvar BulkRegistration;\n(function (BulkRegistration) {\n    /**\n     * Creates a new bulk registration.\n     * @return an empty bulk registration.\n     */\n    function create() {\n        return new BulkRegistrationImpl();\n    }\n    BulkRegistration.create = create;\n})(BulkRegistration = exports.BulkRegistration || (exports.BulkRegistration = {}));\nclass BulkRegistrationImpl {\n    constructor() {\n        this._registrations = [];\n        this._registered = new Set();\n    }\n    add(type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        if (this._registered.has(method)) {\n            throw new Error(`${method} is already added to this registration`);\n        }\n        const id = UUID.generateUuid();\n        this._registrations.push({\n            id: id,\n            method: method,\n            registerOptions: registerOptions || {}\n        });\n        this._registered.add(method);\n    }\n    asRegistrationParams() {\n        return {\n            registrations: this._registrations\n        };\n    }\n}\nvar BulkUnregistration;\n(function (BulkUnregistration) {\n    function create() {\n        return new BulkUnregistrationImpl(undefined, []);\n    }\n    BulkUnregistration.create = create;\n})(BulkUnregistration = exports.BulkUnregistration || (exports.BulkUnregistration = {}));\nclass BulkUnregistrationImpl {\n    constructor(_connection, unregistrations) {\n        this._connection = _connection;\n        this._unregistrations = new Map();\n        unregistrations.forEach(unregistration => {\n            this._unregistrations.set(unregistration.method, unregistration);\n        });\n    }\n    get isAttached() {\n        return !!this._connection;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    add(unregistration) {\n        this._unregistrations.set(unregistration.method, unregistration);\n    }\n    dispose() {\n        let unregistrations = [];\n        for (let unregistration of this._unregistrations.values()) {\n            unregistrations.push(unregistration);\n        }\n        let params = {\n            unregisterations: unregistrations\n        };\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(undefined, (_error) => {\n            this._connection.console.info(`Bulk unregistration failed.`);\n        });\n    }\n    disposeSingle(arg) {\n        const method = Is.string(arg) ? arg : arg.method;\n        const unregistration = this._unregistrations.get(method);\n        if (!unregistration) {\n            return false;\n        }\n        let params = {\n            unregisterations: [unregistration]\n        };\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(() => {\n            this._unregistrations.delete(method);\n        }, (_error) => {\n            this._connection.console.info(`Unregistering request handler for ${unregistration.id} failed.`);\n        });\n        return true;\n    }\n}\nclass RemoteClientImpl {\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    register(typeOrRegistrations, registerOptionsOrType, registerOptions) {\n        if (typeOrRegistrations instanceof BulkRegistrationImpl) {\n            return this.registerMany(typeOrRegistrations);\n        }\n        else if (typeOrRegistrations instanceof BulkUnregistrationImpl) {\n            return this.registerSingle1(typeOrRegistrations, registerOptionsOrType, registerOptions);\n        }\n        else {\n            return this.registerSingle2(typeOrRegistrations, registerOptionsOrType);\n        }\n    }\n    registerSingle1(unregistration, type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        const id = UUID.generateUuid();\n        let params = {\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\n        };\n        if (!unregistration.isAttached) {\n            unregistration.attach(this.connection);\n        }\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\n            unregistration.add({ id: id, method: method });\n            return unregistration;\n        }, (_error) => {\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\n            return Promise.reject(_error);\n        });\n    }\n    registerSingle2(type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        const id = UUID.generateUuid();\n        let params = {\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\n        };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\n            return vscode_languageserver_protocol_1.Disposable.create(() => {\n                this.unregisterSingle(id, method);\n            });\n        }, (_error) => {\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\n            return Promise.reject(_error);\n        });\n    }\n    unregisterSingle(id, method) {\n        let params = {\n            unregisterations: [{ id, method }]\n        };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(undefined, (_error) => {\n            this.connection.console.info(`Unregistering request handler for ${id} failed.`);\n        });\n    }\n    registerMany(registrations) {\n        let params = registrations.asRegistrationParams();\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then(() => {\n            return new BulkUnregistrationImpl(this._connection, params.registrations.map(registration => { return { id: registration.id, method: registration.method }; }));\n        }, (_error) => {\n            this.connection.console.info(`Bulk registration failed.`);\n            return Promise.reject(_error);\n        });\n    }\n}\nclass _RemoteWorkspaceImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    applyEdit(paramOrEdit) {\n        function isApplyWorkspaceEditParams(value) {\n            return value && !!value.edit;\n        }\n        let params = isApplyWorkspaceEditParams(paramOrEdit) ? paramOrEdit : { edit: paramOrEdit };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params);\n    }\n}\nconst RemoteWorkspaceImpl = workspaceFolders_1.WorkspaceFoldersFeature(configuration_1.ConfigurationFeature(_RemoteWorkspaceImpl));\nclass TracerImpl {\n    constructor() {\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    set trace(value) {\n        this._trace = value;\n    }\n    log(message, verbose) {\n        if (this._trace === vscode_languageserver_protocol_1.Trace.Off) {\n            return;\n        }\n        this.connection.sendNotification(vscode_languageserver_protocol_1.LogTraceNotification.type, {\n            message: message,\n            verbose: this._trace === vscode_languageserver_protocol_1.Trace.Verbose ? verbose : undefined\n        });\n    }\n}\nclass TelemetryImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    logEvent(data) {\n        this.connection.sendNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, data);\n    }\n}\nclass _LanguagesImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    attachWorkDoneProgress(params) {\n        return progress_1.attachWorkDone(this.connection, params);\n    }\n    attachPartialResultProgress(_type, params) {\n        return progress_1.attachPartialResult(this.connection, params);\n    }\n}\nexports._LanguagesImpl = _LanguagesImpl;\nconst LanguagesImpl = semanticTokens_1.SemanticTokensFeature(callHierarchy_1.CallHierarchyFeature(_LanguagesImpl));\nfunction combineConsoleFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineConsoleFeatures = combineConsoleFeatures;\nfunction combineTelemetryFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineTelemetryFeatures = combineTelemetryFeatures;\nfunction combineTracerFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineTracerFeatures = combineTracerFeatures;\nfunction combineClientFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineClientFeatures = combineClientFeatures;\nfunction combineWindowFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineWindowFeatures = combineWindowFeatures;\nfunction combineWorkspaceFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineWorkspaceFeatures = combineWorkspaceFeatures;\nfunction combineLanguagesFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineLanguagesFeatures = combineLanguagesFeatures;\nfunction combineFeatures(one, two) {\n    function combine(one, two, func) {\n        if (one && two) {\n            return func(one, two);\n        }\n        else if (one) {\n            return one;\n        }\n        else {\n            return two;\n        }\n    }\n    let result = {\n        __brand: 'features',\n        console: combine(one.console, two.console, combineConsoleFeatures),\n        tracer: combine(one.tracer, two.tracer, combineTracerFeatures),\n        telemetry: combine(one.telemetry, two.telemetry, combineTelemetryFeatures),\n        client: combine(one.client, two.client, combineClientFeatures),\n        window: combine(one.window, two.window, combineWindowFeatures),\n        workspace: combine(one.workspace, two.workspace, combineWorkspaceFeatures)\n    };\n    return result;\n}\nexports.combineFeatures = combineFeatures;\nfunction createConnection(connectionFactory, watchDog, factories) {\n    const logger = (factories && factories.console ? new (factories.console(RemoteConsoleImpl))() : new RemoteConsoleImpl());\n    const connection = connectionFactory(logger);\n    logger.rawAttach(connection);\n    const tracer = (factories && factories.tracer ? new (factories.tracer(TracerImpl))() : new TracerImpl());\n    const telemetry = (factories && factories.telemetry ? new (factories.telemetry(TelemetryImpl))() : new TelemetryImpl());\n    const client = (factories && factories.client ? new (factories.client(RemoteClientImpl))() : new RemoteClientImpl());\n    const remoteWindow = (factories && factories.window ? new (factories.window(RemoteWindowImpl))() : new RemoteWindowImpl());\n    const workspace = (factories && factories.workspace ? new (factories.workspace(RemoteWorkspaceImpl))() : new RemoteWorkspaceImpl());\n    const languages = (factories && factories.languages ? new (factories.languages(LanguagesImpl))() : new LanguagesImpl());\n    const allRemotes = [logger, tracer, telemetry, client, remoteWindow, workspace, languages];\n    function asPromise(value) {\n        if (value instanceof Promise) {\n            return value;\n        }\n        else if (Is.thenable(value)) {\n            return new Promise((resolve, reject) => {\n                value.then((resolved) => resolve(resolved), (error) => reject(error));\n            });\n        }\n        else {\n            return Promise.resolve(value);\n        }\n    }\n    let shutdownHandler = undefined;\n    let initializeHandler = undefined;\n    let exitHandler = undefined;\n    let protocolConnection = {\n        listen: () => connection.listen(),\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: (type, handler) => connection.onRequest(type, handler),\n        sendNotification: (type, param) => {\n            const method = Is.string(type) ? type : type.method;\n            if (arguments.length === 1) {\n                connection.sendNotification(method);\n            }\n            else {\n                connection.sendNotification(method, param);\n            }\n        },\n        onNotification: (type, handler) => connection.onNotification(type, handler),\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        onInitialize: (handler) => initializeHandler = handler,\n        onInitialized: (handler) => connection.onNotification(vscode_languageserver_protocol_1.InitializedNotification.type, handler),\n        onShutdown: (handler) => shutdownHandler = handler,\n        onExit: (handler) => exitHandler = handler,\n        get console() { return logger; },\n        get telemetry() { return telemetry; },\n        get tracer() { return tracer; },\n        get client() { return client; },\n        get window() { return remoteWindow; },\n        get workspace() { return workspace; },\n        get languages() { return languages; },\n        onDidChangeConfiguration: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, handler),\n        onDidChangeWatchedFiles: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, handler),\n        __textDocumentSync: undefined,\n        onDidOpenTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, handler),\n        onDidChangeTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, handler),\n        onDidCloseTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, handler),\n        onWillSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, handler),\n        onWillSaveTextDocumentWaitUntil: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, handler),\n        onDidSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, handler),\n        sendDiagnostics: (params) => connection.sendNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params),\n        onHover: (handler) => connection.onRequest(vscode_languageserver_protocol_1.HoverRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onCompletion: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onCompletionResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, handler),\n        onSignatureHelp: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onDeclaration: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onTypeDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onImplementation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onReferences: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onDocumentHighlight: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onDocumentSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onWorkspaceSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onCodeAction: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onCodeLens: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onCodeLensResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onDocumentRangeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onDocumentOnTypeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onRenameRequest: (handler) => connection.onRequest(vscode_languageserver_protocol_1.RenameRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onPrepareRename: (handler) => connection.onRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentLinks: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onDocumentLinkResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentColor: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onColorPresentation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onFoldingRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onSelectionRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onExecuteCommand: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        dispose: () => connection.dispose()\n    };\n    for (let remote of allRemotes) {\n        remote.attach(protocolConnection);\n    }\n    connection.onRequest(vscode_languageserver_protocol_1.InitializeRequest.type, (params) => {\n        watchDog.initialize(params);\n        if (Is.string(params.trace)) {\n            tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.trace);\n        }\n        for (let remote of allRemotes) {\n            remote.initialize(params.capabilities);\n        }\n        if (initializeHandler) {\n            let result = initializeHandler(params, new vscode_languageserver_protocol_1.CancellationTokenSource().token, progress_1.attachWorkDone(connection, params), undefined);\n            return asPromise(result).then((value) => {\n                if (value instanceof vscode_languageserver_protocol_1.ResponseError) {\n                    return value;\n                }\n                let result = value;\n                if (!result) {\n                    result = { capabilities: {} };\n                }\n                let capabilities = result.capabilities;\n                if (!capabilities) {\n                    capabilities = {};\n                    result.capabilities = capabilities;\n                }\n                if (capabilities.textDocumentSync === undefined || capabilities.textDocumentSync === null) {\n                    capabilities.textDocumentSync = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n                }\n                else if (!Is.number(capabilities.textDocumentSync) && !Is.number(capabilities.textDocumentSync.change)) {\n                    capabilities.textDocumentSync.change = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n                }\n                for (let remote of allRemotes) {\n                    remote.fillServerCapabilities(capabilities);\n                }\n                return result;\n            });\n        }\n        else {\n            let result = { capabilities: { textDocumentSync: vscode_languageserver_protocol_1.TextDocumentSyncKind.None } };\n            for (let remote of allRemotes) {\n                remote.fillServerCapabilities(result.capabilities);\n            }\n            return result;\n        }\n    });\n    connection.onRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, () => {\n        watchDog.shutdownReceived = true;\n        if (shutdownHandler) {\n            return shutdownHandler(new vscode_languageserver_protocol_1.CancellationTokenSource().token);\n        }\n        else {\n            return undefined;\n        }\n    });\n    connection.onNotification(vscode_languageserver_protocol_1.ExitNotification.type, () => {\n        try {\n            if (exitHandler) {\n                exitHandler();\n            }\n        }\n        finally {\n            if (watchDog.shutdownReceived) {\n                watchDog.exit(0);\n            }\n            else {\n                watchDog.exit(1);\n            }\n        }\n    });\n    connection.onNotification(vscode_languageserver_protocol_1.SetTraceNotification.type, (params) => {\n        tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.value);\n    });\n    return protocolConnection;\n}\nexports.createConnection = createConnection;\n//# sourceMappingURL=server.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst url = require(\"url\");\nconst path = require(\"path\");\nconst fs = require(\"fs\");\nconst child_process_1 = require(\"child_process\");\n/**\n * @deprecated Use the `vscode-uri` npm module which provides a more\n * complete implementation of handling VS Code URIs.\n */\nfunction uriToFilePath(uri) {\n    let parsed = url.parse(uri);\n    if (parsed.protocol !== 'file:' || !parsed.path) {\n        return undefined;\n    }\n    let segments = parsed.path.split('/');\n    for (var i = 0, len = segments.length; i < len; i++) {\n        segments[i] = decodeURIComponent(segments[i]);\n    }\n    if (process.platform === 'win32' && segments.length > 1) {\n        let first = segments[0];\n        let second = segments[1];\n        // Do we have a drive letter and we started with a / which is the\n        // case if the first segement is empty (see split above)\n        if (first.length === 0 && second.length > 1 && second[1] === ':') {\n            // Remove first slash\n            segments.shift();\n        }\n    }\n    return path.normalize(segments.join('/'));\n}\nexports.uriToFilePath = uriToFilePath;\nfunction isWindows() {\n    return process.platform === 'win32';\n}\nfunction resolve(moduleName, nodePath, cwd, tracer) {\n    const nodePathKey = 'NODE_PATH';\n    const app = [\n        'var p = process;',\n        'p.on(\\'message\\',function(m){',\n        'if(m.c===\\'e\\'){',\n        'p.exit(0);',\n        '}',\n        'else if(m.c===\\'rs\\'){',\n        'try{',\n        'var r=require.resolve(m.a);',\n        'p.send({c:\\'r\\',s:true,r:r});',\n        '}',\n        'catch(err){',\n        'p.send({c:\\'r\\',s:false});',\n        '}',\n        '}',\n        '});'\n    ].join('');\n    return new Promise((resolve, reject) => {\n        let env = process.env;\n        let newEnv = Object.create(null);\n        Object.keys(env).forEach(key => newEnv[key] = env[key]);\n        if (nodePath && fs.existsSync(nodePath) /* see issue 545 */) {\n            if (newEnv[nodePathKey]) {\n                newEnv[nodePathKey] = nodePath + path.delimiter + newEnv[nodePathKey];\n            }\n            else {\n                newEnv[nodePathKey] = nodePath;\n            }\n            if (tracer) {\n                tracer(`NODE_PATH value is: ${newEnv[nodePathKey]}`);\n            }\n        }\n        newEnv['ELECTRON_RUN_AS_NODE'] = '1';\n        try {\n            let cp = child_process_1.fork('', [], {\n                cwd: cwd,\n                env: newEnv,\n                execArgv: ['-e', app]\n            });\n            if (cp.pid === void 0) {\n                reject(new Error(`Starting process to resolve node module  ${moduleName} failed`));\n                return;\n            }\n            cp.on('error', (error) => {\n                reject(error);\n            });\n            cp.on('message', (message) => {\n                if (message.c === 'r') {\n                    cp.send({ c: 'e' });\n                    if (message.s) {\n                        resolve(message.r);\n                    }\n                    else {\n                        reject(new Error(`Failed to resolve module: ${moduleName}`));\n                    }\n                }\n            });\n            let message = {\n                c: 'rs',\n                a: moduleName\n            };\n            cp.send(message);\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n}\nexports.resolve = resolve;\n/**\n * Resolve the global npm package path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nfunction resolveGlobalNodePath(tracer) {\n    let npmCommand = 'npm';\n    const env = Object.create(null);\n    Object.keys(process.env).forEach(key => env[key] = process.env[key]);\n    env['NO_UPDATE_NOTIFIER'] = 'true';\n    const options = {\n        encoding: 'utf8',\n        env\n    };\n    if (isWindows()) {\n        npmCommand = 'npm.cmd';\n        options.shell = true;\n    }\n    let handler = () => { };\n    try {\n        process.on('SIGPIPE', handler);\n        let stdout = child_process_1.spawnSync(npmCommand, ['config', 'get', 'prefix'], options).stdout;\n        if (!stdout) {\n            if (tracer) {\n                tracer(`'npm config get prefix' didn't return a value.`);\n            }\n            return undefined;\n        }\n        let prefix = stdout.trim();\n        if (tracer) {\n            tracer(`'npm config get prefix' value is: ${prefix}`);\n        }\n        if (prefix.length > 0) {\n            if (isWindows()) {\n                return path.join(prefix, 'node_modules');\n            }\n            else {\n                return path.join(prefix, 'lib', 'node_modules');\n            }\n        }\n        return undefined;\n    }\n    catch (err) {\n        return undefined;\n    }\n    finally {\n        process.removeListener('SIGPIPE', handler);\n    }\n}\nexports.resolveGlobalNodePath = resolveGlobalNodePath;\n/*\n * Resolve the global yarn pakage path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nfunction resolveGlobalYarnPath(tracer) {\n    let yarnCommand = 'yarn';\n    let options = {\n        encoding: 'utf8'\n    };\n    if (isWindows()) {\n        yarnCommand = 'yarn.cmd';\n        options.shell = true;\n    }\n    let handler = () => { };\n    try {\n        process.on('SIGPIPE', handler);\n        let results = child_process_1.spawnSync(yarnCommand, ['global', 'dir', '--json'], options);\n        let stdout = results.stdout;\n        if (!stdout) {\n            if (tracer) {\n                tracer(`'yarn global dir' didn't return a value.`);\n                if (results.stderr) {\n                    tracer(results.stderr);\n                }\n            }\n            return undefined;\n        }\n        let lines = stdout.trim().split(/\\r?\\n/);\n        for (let line of lines) {\n            try {\n                let yarn = JSON.parse(line);\n                if (yarn.type === 'log') {\n                    return path.join(yarn.data, 'node_modules');\n                }\n            }\n            catch (e) {\n                // Do nothing. Ignore the line\n            }\n        }\n        return undefined;\n    }\n    catch (err) {\n        return undefined;\n    }\n    finally {\n        process.removeListener('SIGPIPE', handler);\n    }\n}\nexports.resolveGlobalYarnPath = resolveGlobalYarnPath;\nvar FileSystem;\n(function (FileSystem) {\n    let _isCaseSensitive = undefined;\n    function isCaseSensitive() {\n        if (_isCaseSensitive !== void 0) {\n            return _isCaseSensitive;\n        }\n        if (process.platform === 'win32') {\n            _isCaseSensitive = false;\n        }\n        else {\n            // convert current file name to upper case / lower case and check if file exists\n            // (guards against cases when name is already all uppercase or lowercase)\n            _isCaseSensitive = !fs.existsSync(__filename.toUpperCase()) || !fs.existsSync(__filename.toLowerCase());\n        }\n        return _isCaseSensitive;\n    }\n    FileSystem.isCaseSensitive = isCaseSensitive;\n    function isParent(parent, child) {\n        if (isCaseSensitive()) {\n            return path.normalize(child).indexOf(path.normalize(parent)) === 0;\n        }\n        else {\n            return path.normalize(child).toLowerCase().indexOf(path.normalize(parent).toLowerCase()) === 0;\n        }\n    }\n    FileSystem.isParent = isParent;\n})(FileSystem = exports.FileSystem || (exports.FileSystem = {}));\nfunction resolveModulePath(workspaceRoot, moduleName, nodePath, tracer) {\n    if (nodePath) {\n        if (!path.isAbsolute(nodePath)) {\n            nodePath = path.join(workspaceRoot, nodePath);\n        }\n        return resolve(moduleName, nodePath, nodePath, tracer).then((value) => {\n            if (FileSystem.isParent(nodePath, value)) {\n                return value;\n            }\n            else {\n                return Promise.reject(new Error(`Failed to load ${moduleName} from node path location.`));\n            }\n        }).then(undefined, (_error) => {\n            return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\n        });\n    }\n    else {\n        return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\n    }\n}\nexports.resolveModulePath = resolveModulePath;\n//# sourceMappingURL=files.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst semanticTokens_1 = require(\"./semanticTokens\");\nexports.SemanticTokensBuilder = semanticTokens_1.SemanticTokensBuilder;\n__export(require(\"vscode-languageserver-protocol/\"));\n__export(require(\"./server\"));\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    ProposedFeatures.all = {\n        __brand: 'features'\n    };\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\n//# sourceMappingURL=api.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Is = require(\"../common/utils/is\");\nconst server_1 = require(\"../common/server\");\nconst fm = require(\"./files\");\nconst node_1 = require(\"vscode-languageserver-protocol/node\");\n__export(require(\"vscode-languageserver-protocol/node\"));\n__export(require(\"../common/api\"));\nvar Files;\n(function (Files) {\n    Files.uriToFilePath = fm.uriToFilePath;\n    Files.resolveGlobalNodePath = fm.resolveGlobalNodePath;\n    Files.resolveGlobalYarnPath = fm.resolveGlobalYarnPath;\n    Files.resolve = fm.resolve;\n    Files.resolveModulePath = fm.resolveModulePath;\n})(Files = exports.Files || (exports.Files = {}));\nlet _shutdownReceived = false;\nlet exitTimer = undefined;\nfunction setupExitTimer() {\n    const argName = '--clientProcessId';\n    function runTimer(value) {\n        try {\n            let processId = parseInt(value);\n            if (!isNaN(processId)) {\n                exitTimer = setInterval(() => {\n                    try {\n                        process.kill(processId, 0);\n                    }\n                    catch (ex) {\n                        // Parent process doesn't exist anymore. Exit the server.\n                        process.exit(_shutdownReceived ? 0 : 1);\n                    }\n                }, 3000);\n            }\n        }\n        catch (e) {\n            // Ignore errors;\n        }\n    }\n    for (let i = 2; i < process.argv.length; i++) {\n        let arg = process.argv[i];\n        if (arg === argName && i + 1 < process.argv.length) {\n            runTimer(process.argv[i + 1]);\n            return;\n        }\n        else {\n            let args = arg.split('=');\n            if (args[0] === argName) {\n                runTimer(args[1]);\n            }\n        }\n    }\n}\nsetupExitTimer();\nconst watchDog = {\n    initialize: (params) => {\n        const processId = params.processId;\n        if (Is.number(processId) && exitTimer === undefined) {\n            // We received a parent process id. Set up a timer to periodically check\n            // if the parent is still alive.\n            setInterval(() => {\n                try {\n                    process.kill(processId, 0);\n                }\n                catch (ex) {\n                    // Parent process doesn't exist anymore. Exit the server.\n                    process.exit(_shutdownReceived ? 0 : 1);\n                }\n            }, 3000);\n        }\n    },\n    get shutdownReceived() {\n        return _shutdownReceived;\n    },\n    set shutdownReceived(value) {\n        _shutdownReceived = value;\n    },\n    exit: (code) => {\n        process.exit(code);\n    }\n};\nfunction createConnection(arg1, arg2, arg3, arg4) {\n    let factories;\n    let input;\n    let output;\n    let options;\n    if (arg1 !== void 0 && arg1.__brand === 'features') {\n        factories = arg1;\n        arg1 = arg2;\n        arg2 = arg3;\n        arg3 = arg4;\n    }\n    if (node_1.ConnectionStrategy.is(arg1) || node_1.ConnectionOptions.is(arg1)) {\n        options = arg1;\n    }\n    else {\n        input = arg1;\n        output = arg2;\n        options = arg3;\n    }\n    return _createConnection(input, output, options, factories);\n}\nexports.createConnection = createConnection;\nfunction _createConnection(input, output, options, factories) {\n    if (!input && !output && process.argv.length > 2) {\n        let port = void 0;\n        let pipeName = void 0;\n        let argv = process.argv.slice(2);\n        for (let i = 0; i < argv.length; i++) {\n            let arg = argv[i];\n            if (arg === '--node-ipc') {\n                input = new node_1.IPCMessageReader(process);\n                output = new node_1.IPCMessageWriter(process);\n                break;\n            }\n            else if (arg === '--stdio') {\n                input = process.stdin;\n                output = process.stdout;\n                break;\n            }\n            else if (arg === '--socket') {\n                port = parseInt(argv[i + 1]);\n                break;\n            }\n            else if (arg === '--pipe') {\n                pipeName = argv[i + 1];\n                break;\n            }\n            else {\n                var args = arg.split('=');\n                if (args[0] === '--socket') {\n                    port = parseInt(args[1]);\n                    break;\n                }\n                else if (args[0] === '--pipe') {\n                    pipeName = args[1];\n                    break;\n                }\n            }\n        }\n        if (port) {\n            let transport = node_1.createServerSocketTransport(port);\n            input = transport[0];\n            output = transport[1];\n        }\n        else if (pipeName) {\n            let transport = node_1.createServerPipeTransport(pipeName);\n            input = transport[0];\n            output = transport[1];\n        }\n    }\n    var commandLineMessage = 'Use arguments of createConnection or set command line parameters: \\'--node-ipc\\', \\'--stdio\\' or \\'--socket={number}\\'';\n    if (!input) {\n        throw new Error('Connection input stream is not set. ' + commandLineMessage);\n    }\n    if (!output) {\n        throw new Error('Connection output stream is not set. ' + commandLineMessage);\n    }\n    // Backwards compatibility\n    if (Is.func(input.read) && Is.func(input.on)) {\n        let inputStream = input;\n        inputStream.on('end', () => {\n            process.exit(_shutdownReceived ? 0 : 1);\n        });\n        inputStream.on('close', () => {\n            process.exit(_shutdownReceived ? 0 : 1);\n        });\n    }\n    const connectionFactory = (logger) => {\n        return node_1.createProtocolConnection(input, output, logger, options);\n    };\n    return server_1.createConnection(connectionFactory, watchDog, factories);\n}\n//# sourceMappingURL=main.js.map","import { createConnection, InitializeParams, InitializeResult } from 'vscode-languageserver/node';\nimport { VLS } from './services/vls';\n\nconst connection = process.argv.length <= 2 ? createConnection(process.stdin, process.stdout) : createConnection();\n\nconsole.log = connection.console.log.bind(connection.console);\nconsole.error = connection.console.error.bind(connection.console);\n\nconst vls = new VLS(connection);\nconnection.onInitialize(\n  async (params: InitializeParams): Promise<InitializeResult> => {\n    await vls.init(params);\n\n    console.log('Vetur initialized');\n\n    return {\n      capabilities: vls.capabilities\n    };\n  }\n);\n\nvls.listen();\n"],"names":["Position","Range","Location","LocationLink","Color","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","DiagnosticTag","DiagnosticCode","Diagnostic","Command","TextEdit","TextDocumentEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","string","value","String","func","array","Array","isArray","Object","defineProperty","exports","Number","Error","every","elem","check","then","_ral","RAL","undefined","install","ral","Disposable","create","dispose","DefaultSize","CR","Buffer","from","LF","MessageBuffer","[object Object]","encoding","this","_encoding","index","buffer","allocUnsafe","chunk","toAppend","length","set","newSize","Math","ceil","concat","slice","current","result","Map","toString","split","forEach","header","indexOf","key","substr","trim","nextStart","alloc","copy","numberOfBytes","ReadableStreamWrapper","stream","listener","on","disposable_1","off","WritableStreamWrapper","data","Promise","resolve","reject","callback","error","write","end","_ril","freeze","messageBuffer","applicationJson","encoder","name","encode","msg","options","JSON","stringify","charset","err","decoder","decode","parse","util_1","TextDecoder","asReadableStream","socket","asWritableStream","console","timer","setTimeout","ms","args","handle","clearTimeout","setImmediate","clearImmediate","RIL","ral_1","default","ErrorCodes","ParseError","InvalidRequest","MethodNotFound","InvalidParams","InternalError","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageWriteError","MessageReadError","ResponseError","code","message","super","is","number","setPrototypeOf","prototype","ParameterStructures","kind","auto","byName","byPosition","AbstractMessageSignature","_method","_numberOfParams","method","numberOfParams","parameterStructures","_parameterStructures","_","candidate","id","Event","_disposable","None","CallbackList","context","bucket","_callbacks","_contexts","push","remove","foundCallbackWithDifferentContext","i","len","splice","ret","callbacks","contexts","apply","e","Emitter","_options","event","_event","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","call","CancellationToken","isCancellationRequested","onCancellationRequested","events_1","Cancelled","Is","boolean","shortcutEvent","bind","MutableToken","_isCancelled","_emitter","fire","token","_token","cancel","ResolvedMessageReaderOptions","MessageReader","listen","onError","onClose","onPartialMessage","AbstractMessageReader","errorEmitter","closeEmitter","partialMessageEmitter","asError","info","fromOptions","_a","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","readable","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimeout","timeout","partialMessageTimer","onData","fireError","fireClose","append","headers","tryReadHeaders","contentLength","get","parseInt","isNaN","body","tryReadBody","setPartialMessageTimer","p","clearPartialMessageTimer","firePartialMessage","waitingTime","capacity","_capacity","_active","_waiting","thunk","runNext","active","doRunNext","next","shift","ResolvedMessageWriterOptions","MessageWriter","AbstractMessageWriter","count","_b","contentTypeEncoder","contentEncoder","writable","errorCount","writeSemaphore","semaphore_1","Semaphore","lock","async","byteLength","doWrite","join","handleError","Touch","First","AsOld","Last","AsNew","LinkedMap","Symbol","toStringTag","_map","_head","_tail","_size","_state","clear","size","first","last","has","touch","item","previous","addItemLast","addItemFirst","delete","removeItem","callbackfn","thisArg","state","map","iterator","done","entries","currentSize","limit","ratio","_limit","_ratio","min","max","checkTrim","trimOld","round","CancelNotification","ProgressNotification","StarRequestHandler","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionStrategy","CancellationReceiverStrategy","CancellationSenderStrategy","CancellationStrategy","ConnectionState","type","messages_1","NotificationType","warn","log","fromString","Off","toLowerCase","Messages","Verbose","Text","ConnectionError","cancelUndispatched","Message","createCancellationTokenSource","cancellation_1","CancellationTokenSource","conn","sendNotification","sendCancellation","cleanup","receiver","sender","ConnectionOptions","cancellationStrategy","connectionStrategy","messageReader","messageWriter","_logger","logger","NullLogger","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","version","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","tracer","messageQueue","linkedMap_1","responsePromises","requestTokens","trace","traceFormat","New","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","addMessageToQueue","queue","isRequestMessage","isResponseMessage","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","requestMessage","reply","resultOrError","startTime","jsonrpc","toJson","traceSendingResponse","replyError","replySuccess","params","logLSPMessage","traceReceivedRequest","element","requestHandler","handler","Date","now","tokenKey","cancellationSource","handlerResult","promise","handleRequest","isNotificationMessage","notificationHandler","source","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","toCancel","strategy","response","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","nullToUndefined","isNamedParam","computeSingleParam","computeMessageParams","connection","messageParams","paramStart","paramEnd","notificationMessage","traceSendingNotification","onNotification","onProgress","_type","sendProgress","onUnhandledProgress","sendRequest","throwIfNotListening","disposable","r","traceSendingRequest","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","keys","AlreadyListening","throwIfListening","inspect","verbose","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","ReadableStreamMessageReader","messageWriter_1","WriteableStreamMessageWriter","connection_1","createMessageConnection","ProgressType","ril_1","m","hasOwnProperty","__export","api_1","IPCMessageReader","process","eventEmitter","IPCMessageWriter","send","SocketMessageReader","SocketMessageWriter","destroy","StreamMessageReader","readble","StreamMessageWriter","randomSuffix","crypto_1","randomBytes","platform","path","os","tmpdir","pipeName","connectResolve","connected","_reject","server","net_1","createServer","close","removeListener","onConnected","createConnection","port","input","output","reader","read","writer","isMessageWriter","require$$0","line","character","objectLiteral","one","two","three","four","start","uri","range","defined","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","color","label","textEdit","additionalTextEdits","typedArray","startLine","endLine","startCharacter","endCharacter","location","Warning","Information","Hint","Unnecessary","Deprecated","target","severity","relatedInformation","title","command","_i","arguments","replace","newText","insert","position","del","textDocument","edits","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","changes","documentChanges","change","TextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","CompletionItemKind","InsertTextFormat","CompletionItemTag","InsertReplaceEdit","CompletionItem","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolKind","SymbolTag","SymbolInformation","DocumentSymbol","CodeActionKind","CodeActionContext","CodeAction","CodeLens","FormattingOptions","DocumentLink","SelectionRange","TextEditChangeImpl","edit","all","WorkspaceChange","workspaceEdit","_this","_textEditChanges","_workspaceEdit","textEditChange","enumerable","configurable","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","languageId","text","PlainText","Markdown","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","File","Reference","Folder","EnumMember","Constant","Struct","Operator","TypeParameter","items","isIncomplete","fromPlainText","plainText","language","contents","documentation","parameters","Read","Write","Namespace","Package","Boolean","Key","Null","containerName","detail","selectionRange","children","deprecated","tags","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","diagnostics","only","commandOrEdit","isPreferred","tabSize","insertSpaces","parent","TextDocument","mergeSort","compare","left","right","leftIdx","rightIdx","content","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","document","sortedEdits","a","b","diff","lastModifiedOffset","startOffset","endOffset","substring","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","ch","charAt","offset","low","high","mid","floor","lineOffset","nextLineOffset","ProtocolRequestType0","vscode_jsonrpc_1","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","ImplementationRequest","resultType","TypeDefinitionRequest","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","ConfigurationRequest","DocumentColorRequest","ColorPresentationRequest","FoldingRangeRequest","DeclarationRequest","SelectionRangeRequest","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","CallHierarchyPrepareRequest","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","resultId","TokenFormat","Relative","SemanticTokensRequest","SemanticTokensDeltaRequest","SemanticTokensRangeRequest","SemanticTokensRefreshNotification","DocumentFilter","DocumentSelector","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","protocol_callHierarchy_1","protocol_semanticTokens_1","scheme","pattern","RegistrationRequest","UnregistrationRequest","ResourceOperationKind","Create","Rename","Delete","FailureHandlingKind","Abort","Transactional","TextOnlyTransactional","Undo","StaticRegistrationOptions","hasId","TextDocumentRegistrationOptions","documentSelector","WorkDoneProgressOptions","workDoneProgress","hasWorkDoneProgress","InitializeRequest","InitializeError","unknownProtocolVersion","InitializedNotification","ShutdownRequest","ExitNotification","DidChangeConfigurationNotification","MessageType","Info","Log","ShowMessageNotification","ShowMessageRequest","LogMessageNotification","TelemetryEventNotification","TextDocumentSyncKind","Full","Incremental","DidOpenTextDocumentNotification","DidChangeTextDocumentNotification","DidCloseTextDocumentNotification","DidSaveTextDocumentNotification","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","WillSaveTextDocumentNotification","WillSaveTextDocumentWaitUntilRequest","DidChangeWatchedFilesNotification","FileChangeType","Created","Changed","Deleted","WatchKind","Change","PublishDiagnosticsNotification","CompletionTriggerKind","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","CompletionRequest","CompletionResolveRequest","HoverRequest","SignatureHelpTriggerKind","ContentChange","SignatureHelpRequest","DefinitionRequest","ReferencesRequest","DocumentHighlightRequest","DocumentSymbolRequest","CodeActionRequest","WorkspaceSymbolRequest","CodeLensRequest","CodeLensResolveRequest","DocumentLinkRequest","DocumentLinkResolveRequest","DocumentFormattingRequest","DocumentRangeFormattingRequest","DocumentOnTypeFormattingRequest","RenameRequest","PrepareRenameRequest","ExecuteCommandRequest","ApplyWorkspaceEditRequest","require$$1","require$$2","require$$3","createProtocolConnection","node_1","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","random","_chars","v4","_UUIDPattern","isUUID","test","WorkDoneProgressReporterImpl","_connection","Instances","percentage","cancellable","vscode_languageserver_protocol_1","arg0","arg1","WorkDoneProgressServerReporterImpl","_source","NullProgressReporter","NullProgressServerReporter","ResultProgress","workDoneToken","Base","_progressSupported","capabilities","window","progress","uuid_1","generateUuid","ResultProgressReporterImpl","partialResultToken","arg","_getConfiguration","section","workspaceCapabilities","workspace","workspaceFolders","_onDidChangeWorkspaceFolders","onDidChangeWorkspaceFolders","_unregistration","client","register","callHierarchy","onPrepare","attachWorkDoneProgress","onIncomingCalls","attachPartialResultProgress","onOutgoingCalls","semanticTokens","onDelta","onRange","_prevData","initialize","_id","_prevLine","_prevChar","_data","_dataLen","char","tokenType","tokenModifiers","pushLine","pushChar","prevDataLength","dataLength","startIndex","endIndex","newData","deleteCount","build","null2Undefined","configuration","_documents","_configuration","_onDidChangeContent","_onDidOpen","_onDidClose","_onDidSave","_onWillSave","onDidChangeContent","onDidOpen","onWillSave","_willSaveWaitUntil","onDidSave","onDidClose","__textDocumentSync","onDidOpenTextDocument","td","toFire","onDidChangeTextDocument","contentChanges","onDidCloseTextDocument","onWillSaveTextDocument","reason","onWillSaveTextDocumentWaitUntil","onDidSaveTextDocument","_messages","showErrorMessage","RemoteConsoleImpl","_rawConnection","_capabilities","RemoteWindowImpl","progress_1","ProgressFeature","actions","BulkRegistration","BulkRegistrationImpl","_registrations","_registered","Set","registerOptions","UUID","registrations","BulkUnregistration","BulkUnregistrationImpl","unregistrations","_unregistrations","unregistration","isAttached","values","unregisterations","_error","RemoteClientImpl","typeOrRegistrations","registerOptionsOrType","registerMany","registerSingle1","registerSingle2","attach","_result","unregisterSingle","asRegistrationParams","registration","RemoteWorkspaceImpl","workspaceFolders_1","WorkspaceFoldersFeature","configuration_1","ConfigurationFeature","paramOrEdit","TracerImpl","_trace","TelemetryImpl","_LanguagesImpl","attachWorkDone","attachPartialResult","LanguagesImpl","semanticTokens_1","SemanticTokensFeature","callHierarchy_1","CallHierarchyFeature","combineConsoleFeatures","combineTelemetryFeatures","combineTracerFeatures","combineClientFeatures","combineWindowFeatures","combineWorkspaceFeatures","combine","__brand","telemetry","connectionFactory","watchDog","factories","rawAttach","remoteWindow","languages","allRemotes","asPromise","thenable","resolved","shutdownHandler","initializeHandler","exitHandler","protocolConnection","onInitialize","onInitialized","onShutdown","onExit","onDidChangeConfiguration","onDidChangeWatchedFiles","sendDiagnostics","onHover","onCompletion","onCompletionResolve","onSignatureHelp","onDeclaration","onDefinition","onTypeDefinition","onImplementation","onReferences","onDocumentHighlight","onDocumentSymbol","onWorkspaceSymbol","onCodeAction","onCodeLens","onCodeLensResolve","onDocumentFormatting","onDocumentRangeFormatting","onDocumentOnTypeFormatting","onRenameRequest","onPrepareRename","onDocumentLinks","onDocumentLinkResolve","onDocumentColor","onColorPresentation","onFoldingRanges","onSelectionRanges","onExecuteCommand","remote","textDocumentSync","fillServerCapabilities","shutdownReceived","exit","isWindows","moduleName","nodePath","cwd","app","env","newEnv","fs","existsSync","delimiter","cp","child_process_1","fork","execArgv","pid","c","s","resolveGlobalNodePath","npmCommand","shell","stdout","spawnSync","prefix","FileSystem","parsed","url","protocol","segments","decodeURIComponent","second","normalize","yarnCommand","results","stderr","lines","yarn","_isCaseSensitive","isCaseSensitive","__filename","toUpperCase","isParent","child","workspaceRoot","isAbsolute","SemanticTokensBuilder","ProposedFeatures","Files","uriToFilePath","fm","resolveGlobalYarnPath","resolveModulePath","_shutdownReceived","exitTimer","argName","runTimer","processId","setInterval","kill","ex","argv","setupExitTimer","arg2","arg3","arg4","stdin","transport","createServerSocketTransport","createServerPipeTransport","commandLineMessage","inputStream","server_1","_createConnection","vls","VLS","init"],"mappings":"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"}